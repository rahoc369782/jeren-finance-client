<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Space</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="sp_nav.css" />
    <!-- <link rel="stylesheet" href="/src/styles/plans.css"> -->
    <link rel="stylesheet" href="login.css" />
    <link rel="stylesheet" href="jeren.index.css" />
    <link rel="stylesheet" href="goaltrc.css" />

    <script src="main_processer.js"></script>
    <style></style>
  </head>

  <body>
    <div class="main_wrapper">
      <div id="j_fin_entire_sec" class="sub_wrapper">
        <div class="header_container_wrapper">
          <nav class="global_header_container global_inactive">
            <div class="header_conatainer">
                <div class="j_finance_branding">
                    <span class="j_finance_branding_content" >J-FINANCE</span>
                </div>
                

              <div
                id="_g_header_navbar_wrapper"
                class="g_header_navbar_wrapper"
              >
              
                <div class="dropdown_block">
                    <span
                      id="weare_nav_tab"
                      g_nav_header_tab
                      class="dropdown_block_heading"
                      >Weare</span
                    >
                  </div>
                  <div class="dropdown_block">
                    <span
                      id="news_nav_tab"
                      g_nav_header_tab
                      class="dropdown_block_heading end_block"
                      >Updates</span
                    >
                  </div>
                  <div class="dropdown_block">
                    <span
                      id="news_nav_tab"
                      g_nav_header_tab
                      class="dropdown_block_heading end_block"
                      >Finance</span
                    >
                  </div>
              </div>
            </div>
          </nav>
          <div id="_j_start_cta" class="dropdown_block special_block">
            <span
              onclick="start_process('add','_j_start_cta','j_trns_type_tabs_sec',{text:'Select Transaction type.',status:'info'})"
              g_nav_header_tab
              class="dropdown_block_heading"
              >Add Transaction</span
            >
          </div>
        </div>
        <div
          id="status_strip_wrapper"
          class="plans_strip_container global_inactive"
        >
          <span class="text_content_small" id="account-status-msg"
            >You can add transaction by clicking on Add Transaction.</span
          >
        </div>

        <main class="j_content_section">
          <section id="_j_lhs_sec" class="j_lhs_section global_inactive">
            <div class="j_lhs_section_search">
              <div class="search_bar_wrapper">
                <div class="svg_wrapper">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="#666"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="feather feather-search"
                  >
                    <circle cx="11" cy="11" r="8" />
                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                  </svg>
                </div>
                <input
                  title="accounts_search"
                  type="text"
                  placeholder="Search accounts here..."
                  id="input_data"
                  oninput="drop_show()"
                  autocomplete="off"
                />
              </div>
            </div>
            <div class="j_lhs_section_first">
              <div id="fin-accounts-sec"></div>
            </div>
            <div class="j_lhs_section_two">
              <div class="transaction_section_note">
                <span id="transaction_selected"></span>
              </div>
              <div class="form_btn lock_btn">
                <button
                  id="lock-trns-btn"
                  disabled
                  onb-password-btn
                  class="diable_locking_btn"
                  onclick="lock_entries(event)"
                  onb-lg-email-btn
                >
                  Lock Transaction Entries
                </button>
              </div>
            </div>
            <div class="drop_down_for_input_data">
              <div class="list_all_data">
                <div id="search-accounts-sec">df</div>
              </div>
            </div>
          </section>
          <section class="j_rhs_section">
            <div class="jeren_trns_form_container">
              <div
                id="j_trns_type_tabs_sec"
                class="form_tabs_wrapper global_inactive"
              >
                <div class="tabs_wrapper">
                  <span class="j_tabs">Regular</span>
                </div>
                <div class="tabs_wrapper">
                  <span class="j_tabs">Investment</span>
                </div>
                <div class="tabs_wrapper">
                  <span class="j_tabs">Saved</span>
                </div>
              </div>
              <!-- <div class="transactions_debit_entries">
                        <div class="debit_entries_wrapper">
                            <h4 class="entries_title">Debit Entries</h4>
                        </div>
                        <div class="trns_individual_entry">
                            <span user-unique-id>assets:investment:mf</span>
                            <span user-unique-id>30,000</span>
                        </div>
                        <div class="trns_individual_entry">
                            <span user-unique-id>assets:investment:mf</span>
                            <span user-unique-id>30,000</span>
                        </div>
                        <div class="trns_individual_entry">
                            <span user-unique-id>assets:investment:mf</span>
                            <span user-unique-id>30,000</span>
                        </div>
                    </div> -->
              <!-- <div class=""> -->
              <div id="trns_listing_container"></div>
              <!-- </div> -->

              <div
                id="j_trns_form_sec"
                class="trns_form_wrapper global_inactive"
              >
                <div class="trns_form_subwrapper">
                  <div class="form_input input_spacing">
                    <input
                      onfocus="disable_wrong_input()"
                      autofocus
                      btn="onb-password-btn"
                      id="trns_title_value"
                      common-input
                      required
                      spellcheck="false"
                      placeholder=""
                    />
                    <label for="">Title of transaction</label>
                  </div>
                  <div class="form_input input_spacing">
                    <input
                      type="date"
                      btn="onb-password-btn"
                      id="trns_date_value"
                      common-input
                      required
                      spellcheck="false"
                    />
                    <label for=""></label>
                  </div>

                  <!-- <div class="login_opts input_spacing">
                    <div class="session_opt_block">
                      <input id="session_opt" type="checkbox" />
                      <label for="session_opt" class="duration">
                        Start blur mode</label
                      >
                    </div>
                    <span>Forgot password</span>
                  </div> -->
                  <!-- <div class="wrapper_other_onboardinopt input_spacing">
                    <span user-unique-id>Data to present</span>
                    <label onclick="openlgBlock(event, 'p')">change</label>
                  </div> -->
                  <div class="form_btn input_spacing">
                    <button onclick="finalFormSubmit()" onb-lg-email-btn>
                      Submit Transaction
                    </button>
                  </div>
                </div>
              </div>


            </div>
            <!-- <div class="finance_balance_container">
              <h3>Finance Balance</h3>
              <div>
                expense     12000
              </div>
            </div> -->
          </section>
        </main>
      </div>

      <script>
        const j_allowed_accounts = [
          // Expense Accounts
          {
            name: "assets:bank:exfederal",
            value: "assets:bank:exfederal",
            description: "Federal Bank - Expense Account",
          },

          // Saving Subcategories Account
          {
            name: "assets:bank:svsbi:home",
            value: "assets:bank:svsbi:home",
            description: "SBI Savings - Home Fund",
          },
          {
            name: "assets:bank:svsbi:creditors:akansha",
            value: "assets:bank:svsbi:creditors:akansha",
            description: "SBI Savings - Creditor Akansha",
          },

          // Personal Reserve Account (Secret Reserve)
          {
            name: "assets:bank:reserve:union:personal",
            value: "assets:bank:reserve:union:personal",
            description: "Union Bank - Personal Reserve Account",
          },
          {
            name: "assets:bank:reserve:union:home",
            value: "assets:bank:reserve:union:home",
            description: "Union Bank - Home Reserve Account",
          },

          // Emergency Fund Account
          {
            name: "assets:bank:emidfc",
            value: "assets:bank:emidfc",
            description: "IDFC - Emergency Fund Account",
          },

          // Income Subcategories sources
          {
            name: "assets:bank:inicici",
            value: "assets:bank:inicici",
            description: "ICICI Bank - Income Account",
          },
          // Income sources
          {
            name: "income:source:salary",
            value: "income:source:salary",
            description: "Salary Income Received",
          },
          {
            name: "income:source:dividend",
            value: "income:source:dividend",
            description: "Dividend Income Received",
          },
          {
            name: "income:source:freelancing",
            value: "assets:bank:income:icici:profit",
            description: "ICICI Bank - Profit Income",
          },

          // Expense Accounts (Similar to Income Accounts)
          {
            name: "expense:groceries",
            value: "expense:groceries",
            description: "Groceries Expense",
          },
          {
            name: "expense:personal:lifestyle:clothes",
            value: "expense:personal:lifestyle:clothes",
            description: "Clothing Lifestyle Expense",
          },
          {
            name: "expense:personal:lifestyle:shoes",
            value: "expense:personal:lifestyle:shoes",
            description: "Footwear Lifestyle Expense",
          },
          {
            name: "expense:personal:lifestyle:grooming",
            value: "expense:personal:lifestyle:grooming",
            description: "Grooming Lifestyle Expense",
          },
          {
            name: "expense:personal:office:parties",
            value: "expense:personal:office:parties",
            description: "Office Parties Expense",
          },
          {
            name: "expense:personal:office:food",
            value: "expense:personal:office:food",
            description: "Office Food Expense",
          },
          {
            name: "expense:personal:office:drinks",
            value: "expense:personal:office:drinks",
            description: "Office Drinks Expense",
          },
          {
            name: "expense:personal:food",
            value: "expense:personal:food",
            description: "Personal Food Expense",
          },
          {
            name: "expense:personal:drinks",
            value: "expense:personal:drinks",
            description: "Personal Drinks Expense",
          },
          {
            name: "expense:personal:transport",
            value: "expense:personal:transport",
            description: "Travel Expenses",
          },
          {
            name: "expense:household:monthly",
            value: "expense:household:monthly",
            description: "Household Monthly Expenses",
          },
          {
            name: "expense:household:rent",
            value: "expense:household:rent",
            description: "Household Rent",
          },
          {
            name: "expense:utilities",
            value: "expense:utilities",
            description: "Utility Expenses",
          },
          {
            name: "expense:donation",
            value: "expense:donation",
            description: "Donation Expenses",
          },
          {
            name: "expense:entertainment",
            value: "expense:entertainment",
            description: "Entertainment Expenses",
          },
          {
            name: "expense:medical",
            value: "expense:medical",
            description: "Medical Expenses",
          },
          {
            name: "expense:education",
            value: "expense:education",
            description: "Education Expenses",
          },

          // *Investments* (under assets)
          {
            name: "assets:bank:ivaxis:mf",
            value: "assets:bank:ivaxis:mf",
            description: "Axis Bank - Mutual Funds Investment",
          },
          {
            name: "assets:bank:ivaxis:trading",
            value: "assets:bank:ivaxis:trading",
            description: "Axis Bank - Trading Investments",
          },
          {
            name: "assets:bank:ivaxis:longterm",
            value: "assets:bank:ivaxis:longterm",
            description: "Axis Bank - Long-term Investments",
          },
          {
            name: "assets:bank:ivaxis:gold",
            value: "assets:bank:ivaxis:gold",
            description: "Axis Bank - Gold Investments",
          },
          {
            name: "assets:investments:stocks",
            value: "assets:investments:stocks",
            description: "Stocks Investments",
          },
          {
            name: "assets:investments:mutual_funds:coin",
            value: "assets:investments:mutual_funds:coin",
            description: "Coin Mutual Funds Investments",
          },
          {
            name: "assets:investments:mutual_funds:groww",
            value: "assets:investments:mutual_funds:groww",
            description: "Groww Mutual Funds Investments",
          },
          {
            name: "assets:investments:mutual_funds:dhan",
            value: "assets:investments:mutual_funds:dhan",
            description: "Dhan Mutual Funds Investments",
          },
          {
            name: "assets:investments:real_estate",
            value: "assets:investments:real_estate",
            description: "Real Estate Investments",
          },
          {
            name: "assets:investments:crypto",
            value: "assets:investments:crypto",
            description: "Cryptocurrency Investments",
          },
          {
            name: "assets:investments:trading",
            value: "assets:investments:trading",
            description: "Trading Investments",
          },
          {
            name: "assets:electronics:macbook",
            value: "assets:electronics:macbook",
            description: "Asset Macbook.",
          },
          {
            name: "assets:cash:personal",
            value: "assets:cash:personal",
            description: "Cash in hand",
          },

          // Liability Accounts
          {
            name: "liabilities:credit_card:idfc",
            value: "liabilities:credit_card:idfc",
            description: "Credit Card Liabilities IDFC",
          },
          {
            name: "liabilities:credit_card:axis",
            value: "liabilities:credit_card:axis",
            description: "Credit Card Liabilities AXIS",
          },

          {
            name: "liabilities:creditors:akansha",
            value: "liabilities:creditors:akansha",
            description: "Creditor - Akansha",
          },
          {
            name: "liabilities:creditors:salim",
            value: "liabilities:creditors:salim",
            description: "Creditor - Salim",
          },
          {
            name: "liabilities:loan:personal",
            value: "liabilities:loan:personal",
            description: "Personal Loan Liabilities",
          },
          {
            name: "liabilities:loan:car",
            value: "liabilities:loan:car",
            description: "Car Loan Liabilities",
          },
          {
            name: "liabilities:loan:mortgage",
            value: "liabilities:loan:mortgage",
            description: "Mortgage Loan Liabilities",
          },

          // *Investments (Specific)* - Additional tracking for more detailed categories
          {
            name: "assets:investments:stocks:long_term",
            value: "assets:investments:stocks:long_term",
            description: "Long-term Stocks Investments",
          },
          {
            name: "assets:investments:stocks:short_term",
            value: "assets:investments:stocks:short_term",
            description: "Short-term Stocks Investments",
          },
          {
            name: "assets:investments:real_estate:rentals",
            value: "assets:investments:real_estate:rentals",
            description: "Real Estate Rentals Investments",
          },
          {
            name: "assets:investments:real_estate:capital_gain",
            value: "assets:investments:real_estate:capital_gain",
            description: "Real Estate Capital Gain Investments",
          },
          {
            name: "assets:investments:crypto:btc",
            value: "assets:investments:crypto:btc",
            description: "Bitcoin Investments",
          },
          {
            name: "assets:investments:crypto:eth",
            value: "assets:investments:crypto:eth",
            description: "Ethereum Investments",
          },

          // Equity self funded account
          {
            name: "office:salary",
            value: "equity:opening-balance",
            description: "Equity Opening Balance",
          },
          {
            name: "equity:opening-balance",
            value: "equity:opening-balance",
            description: "Equity Opening Balance",
          },
        ];
        const maxLength = 28;

        function createGlobalEntrySystem() {
          const trnsData = {
            credit: 0,
            debit: 0,
            entries: [],
            total_credit: 0,
            total_debit: 0,
            trns_title: "",
            trns_date: "",
          };

          function put(newEntry) {
            const { trns_type } = newEntry;
            if (trns_type == "debit") {
              if (trnsData["debit"] < 5) {
                trnsData["entries"].push(newEntry);
                trnsData["debit"] += 1;
                trnsData["total_debit"] += newEntry["amount"];
              }
            } else {
              if (trnsData["credit"] < 5) {
                trnsData["entries"].push(newEntry);
                trnsData["credit"] += 1;
                trnsData["total_credit"] += newEntry["amount"];
              }
            }
          }

          function getEntries() {
            return {
              entries: trnsData["entries"],
            };
          }

          function setTitle(value) {
            trnsData["trns_title"] = value;
          }
          function setDate(value) {
            trnsData["trns_date"] = value;
          }

          return {
            put,
            getEntries: () => trnsData["entries"],
            getCreditNo: () => trnsData["credit"],
            getDebitNo: () => trnsData["debit"],
            setTitle,
            getTitle: () => trnsData["trns_title"],
            setDate,
            getDate: () => trnsData["trns_date"],
          };
        }

        const globalEntry = createGlobalEntrySystem();

        async function generateTransactionObjForSumbmission() {
          const currEntries = globalEntry.getEntries();
          const trnsTitle = globalEntry.getTitle();
          const trnsDate = globalEntry.getDate();
          const trns = {};
          trns["timestamp"] = Date.now();
          trns["accounts"] = { debit: [], credit: [] };
          trns["description"] = trnsTitle;
          trns["date"] = trnsDate;

          currEntries.forEach((entry) => {
            const entryObj = {
              account_label: entry["acc"],
              amount: entry["amount"],
            };
            if (entry["trns_type"] == "debit") {
              trns["accounts"]["debit"].push(entryObj);
            } else {
              trns["accounts"]["credit"].push(entryObj);
            }
          });
          TransactionProcessor.updateGlobalStatus({
            text: "Transaction is generated. Processing and uploading to stoarage is in progress.",
            status: "warning",
          });
          const final_result = await TransactionProcessor.processTransactions(
            trns
          );
          if (final_result.success) {
            TransactionProcessor.updateGlobalStatus({
              text: "Transaction is processed and uploaded to stoarage successfully.",
              status: "success",
            });
            // cleanupProcess();
            return;
          }
          updateGlobalStatus({
            text: "Transaction processing and uploading failed",
            status: "failed",
          });
        }

        function finalFormSubmit() {
          const title_in = document.getElementById("trns_title_value");
          const date_in = document.getElementById("trns_date_value");
          const value = title_in.value;
          const date = date_in.value;
          if (!value) {
            alert("Please enter title");
          }
          globalEntry.setTitle(value);
          globalEntry.setDate(date.replaceAll("-", "/"));
          generateTransactionObjForSumbmission();
        }
        function limit_string(text) {
          // Split the text into words

          if (text.length <= maxLength) {
            return text;
          }
          const words = text.split("");

          // Ensure the string has more than maxWords
          // Join the first maxWords words and add ellipsis
          const truncatedText = words.slice(0, maxLength).join("") + "...";

          // If the string is within the limits or the truncation process failed
          // Return the original string
          return truncatedText;
        }

        function listTransaction() {
          const entries = globalEntry.getEntries();
          const parent = document.getElementById("trns_listing_container");
          const title = document.createElement("h4");
          title.classList.add("entries_title");
          title.textContent = "Transaction Accounts";
          parent.appendChild(title);
          entries.forEach((transaction) => {
            const entryDiv = document.createElement("div");
            entryDiv.classList.add("trns_individual_entry");

            const idSpan = document.createElement("span");
            if (transaction.trns_type == "debit") {
              idSpan.classList.add("trns_debit_transaction");
            } else {
              idSpan.classList.add("trns_credit_transaction");
            }
            idSpan.setAttribute("user-unique-id", transaction.acc);
            idSpan.textContent = `${transaction.acc_name} (${transaction.trns_type == "debit" ? "Dr" : "Cr"})`;

            const amountSpan = document.createElement("span");
            amountSpan.setAttribute("user-unique-id", transaction.amount);
            amountSpan.innerHTML = formatIndianCurrency(transaction.amount);

            entryDiv.appendChild(idSpan);
            entryDiv.appendChild(amountSpan);
            parent.appendChild(entryDiv);
          });
        }

        function lock_entries() {
          start_process("login", "_j_lhs_sec", "j_trns_form_sec", {
            text: "Review Transaction once in RHS.",
            status: "info",
          });
          listTransaction();
        }
        // Create the SVG element
        const createSvgElement = () => {
          // Create the namespace for SVG
          const xmlns = "http://www.w3.org/2000/svg";

          // Create the SVG element
          const svg = document.createElementNS(xmlns, "svg");
          svg.setAttribute("xmlns", xmlns);
          svg.setAttribute("width", "18");
          svg.setAttribute("height", "18");
          svg.setAttribute("viewBox", "0 0 24 24");
          svg.setAttribute("fill", "none");
          svg.setAttribute("stroke", "#666");
          svg.setAttribute("stroke-width", "1.5");
          svg.setAttribute("stroke-linecap", "round");
          svg.setAttribute("stroke-linejoin", "round");
          svg.setAttribute("class", "feather feather-file-text");

          // Add the path element
          const path = document.createElementNS(xmlns, "path");
          path.setAttribute(
            "d",
            "M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
          );
          svg.appendChild(path);

          // Add the polyline element
          const polyline1 = document.createElementNS(xmlns, "polyline");
          polyline1.setAttribute("points", "14 2 14 8 20 8");
          svg.appendChild(polyline1);

          // Add the first line element
          const line1 = document.createElementNS(xmlns, "line");
          line1.setAttribute("x1", "16");
          line1.setAttribute("y1", "13");
          line1.setAttribute("x2", "8");
          line1.setAttribute("y2", "13");
          svg.appendChild(line1);

          // Add the second line element
          const line2 = document.createElementNS(xmlns, "line");
          line2.setAttribute("x1", "16");
          line2.setAttribute("y1", "17");
          line2.setAttribute("x2", "8");
          line2.setAttribute("y2", "17");
          svg.appendChild(line2);

          // Add the second polyline element
          const polyline2 = document.createElementNS(xmlns, "polyline");
          polyline2.setAttribute("points", "10 9 9 9 8 9");
          svg.appendChild(polyline2);

          return svg;
        };

        function checkEnbaleBtn() {
          // Display note first
          
          const debitTrns = globalEntry.getDebitNo();
          const creditTrns = globalEntry.getCreditNo();
          const noteContainer = document.getElementById("transaction_selected");
          const note = `${debitTrns} Debit & ${creditTrns} Credit Transactions`;
          noteContainer.innerText = note;

          if (debitTrns > 0 && creditTrns > 0) {
            const lockBtn = document.getElementById("lock-trns-btn");
            if (lockBtn) {
              lockBtn.disabled = false;
              lockBtn.classList.toggle("diable_locking_btn");
            }
          }
        }
        function createFileElement(file) {
          const accWrapper = document.createElement("div");
          accWrapper.classList.add(["account_list_wrapper"]);

          const trnsTypeWrapper = document.createElement("div");
          trnsTypeWrapper.classList.add(["trns_btn_wrapper"]);

          const debitBtn = document.createElement("button");
          const creditBtn = document.createElement("button");
          debitBtn.innerText = "Debit";
          creditBtn.innerText = "Credit";
          debitBtn.classList.add("debit_btn_cta");
          debitBtn.classList.add("trns_type_btn");

          creditBtn.classList.add("credit_btn_cta");
          creditBtn.classList.add("trns_type_btn");

          function createInputField(action, file) {
            // Remove any existing input wrapper
            const existingInputWrapper =
              accWrapper.querySelector(".input_wrapper");
            if (existingInputWrapper) {
              existingInputWrapper.remove();
            }
            const inputWrapper = document.createElement("div");
            inputWrapper.classList.add("input_wrapper");

            const inputField = document.createElement("input");
            inputField.type = "number";
            inputField.autofocus = true;
            inputField.placeholder = "â‚¹ Enter amount";
            inputField.classList.add("amount_input");

            const submitBtn = document.createElement("button");
            submitBtn.innerText = "Submit";
            submitBtn.classList.add("submit_btn");

            // Add event listener for submit button
            submitBtn.addEventListener("click", () => {
              console.log(globalEntry.getEntries());
              const amount = inputField.value.trim();
              if (amount) {
                inputField.value = "";
                console.log(`Amount: ${amount}, Action: ${action}`);
                accWrapper.classList.add("block_entry");
                globalEntry.put({
                  trns_type: action,
                  acc: file.value,
                  acc_name: file.description,
                  amount: parseInt(amount),
                });
                inputWrapper.style.display = "none "
                checkEnbaleBtn();
              } else {
                alert("Please enter a valid amount.");
              }
            });

            inputWrapper.appendChild(inputField);
            inputWrapper.appendChild(submitBtn);

            // Append to the account wrapper
            accWrapper.appendChild(inputWrapper);
            return inputWrapper;
          }

          // Event listeners for buttons
          debitBtn.addEventListener("click", () => {
            // Add entry in global field
            // globalEntry.put({trns_type:"debit",acc:file.value,acc_name:file.description});
            // accWrapper.classList.add("block_entry");
            trnsTypeWrapper.removeChild(debitBtn);
            trnsTypeWrapper.removeChild(creditBtn);
            createInputField("debit", file);
          });

          creditBtn.addEventListener("click", () => {
            // createInputField("Credit");
            // globalEntry.put({trns_type:"credit",acc:file.value,acc_name:file.description})
            // accWrapper.classList.add("block_entry");
            trnsTypeWrapper.removeChild(debitBtn);
            trnsTypeWrapper.removeChild(creditBtn);
            createInputField("credit", file);
          });

          trnsTypeWrapper.appendChild(debitBtn);
          trnsTypeWrapper.appendChild(creditBtn);

          const fileWrapper = document.createElement("div");
          fileWrapper.className = "file_wrapper";
          fileWrapper.title = file.description;

          // Add click event listener
          //   fileWrapper.addEventListener("click", file_switching_process);

          fileWrapper.appendChild(createSvgElement());
          fileWrapper.setAttribute("trns-account-name", "");
          const spanElement = document.createElement("span");
          spanElement.innerText = limit_string(file.description, 20);

          //   if (file.id === currdoc.id) {
          //     spanElement.style.color = "var(--app-color-code)";
          //   }

          fileWrapper.appendChild(spanElement);
          accWrapper.appendChild(fileWrapper);
          accWrapper.appendChild(trnsTypeWrapper);

          return accWrapper;
        }

        function createMappedAccounts() {
          return j_allowed_accounts.map((item) => {
            const ele = createFileElement(item);
            // const fileWrapper = document.createElement("div");
            // fileWrapper.className = "file_wrapper";
            // fileWrapper.innerText = limit_string(item["name"], 20); // Set text
            return ele;
          });
        }

        const accountsSection = document.getElementById("fin-accounts-sec");

        // Append each span element to the container
        createMappedAccounts().forEach((ele) => {
          accountsSection.appendChild(ele);
        });

        //   kahi change nko karu mi kartoy

        function drop_show() {
          let open_drop = document.getElementById("input_data").value;
          const element_drop = document.getElementsByClassName(
            "drop_down_for_input_data"
          );
          let matchedAccounts;
          const searchaccount = document.getElementById("search-accounts-sec");
          if (open_drop) {
            element_drop[0].style.display = "block";
            open_drop = open_drop.toLowerCase();

            // Find matching accounts
            matchedAccounts = j_allowed_accounts.filter((account) =>
              account.name.includes(open_drop)
            );
            // Clear previous search results
            searchaccount.innerHTML = "";

            // Append each span element to the container
            matchedAccounts.forEach((file) => {
              const element = createFileElement(file);
              searchaccount.appendChild(element);
            });

            if (matchedAccounts.length == 0 ) {
                const span = document.createElement("span")
                span.textContent = "No result Found !"
                span.style.paddingLeft = "45px"
                searchaccount.appendChild(span)
            }
          } else {
            element_drop[0].style.display = "none";
            // Clear previous search results
            searchaccount.innerHTML = "";

            matchedAccounts = [];
          }
        }

        drop_show();
      </script>
      <script src="jeren-block-hide.js"></script>
      <script src="goal_trakcer.js"></script>

    </div>
  </body>
</html>
